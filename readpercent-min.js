(function(b){function c(d){var f=b(window).scrollTop()-(b(d).offset().top-b(window).height());var e=(f*100)/b(d).height();return e}function a(d){d=(d<=0)?0:d;d=(d>=100)?100:d;return d}b.fn.readPercent=function(g,f){var e=this.selector,d;if(!g){d=a(c(e));return d}else{if(g===true){d=a(Math.round(c(e)));return d}else{b(window).bind("scroll.globalMessage",{receiver:g,container:e},function(h){d=c(h.data.container);if(f){b(g+" "+f).css("width",d+"%")}else{b(g).val(d)}})}}}}(jQuery));